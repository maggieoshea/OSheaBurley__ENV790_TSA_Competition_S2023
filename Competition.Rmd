---
title: "Wrangling Competition Data"
author: "Katherine Burley & Maggie O'Shea"
output: pdf_document
editor_options: 
  chunk_output_type: console
---

## Load Libraries

```{r message = FALSE, warning=FALSE}
library(tidyverse)
library(readxl)
```

## Import the Dataset

#### Instructions:

In the folder `/Competition/Data` you will find three datasets one with hourly demand, one with hourly temperature and another with relative humidity from January 2005 to December 2010.
Your goal is to forecast **daily** demand for the month of January 2011 based on this historical data. You may or may not use the temperature and relative humidity in your models. The temperature and humidity measurement are from stations close to the household meter data you have.


```{r}
hourly_demand <- read_excel("./Data/load.xlsx")
hourly_temp<- read_excel("./Data/temperature.xlsx")
hourly_humidity<- read_excel("./Data/relative_humidity.xlsx")
```


## Wrangle/Process the Dataset

#### Instructions: 

You will need to transform hourly data into daily data. See the Rmd file from Lesson 11 for instructions on how to aggregate your dataset using pipes.

Note that I provided hourly data. You should take the **average** of the 24 hours to obtain the daily load.


```{r}
daily_demand <- hourly_demand%>%
  group_by(date, meter_id)%>%
  summarize(
    daily_average = (h1+h2+h3+h4+h5+h6+h7+h8+h9+h10+h11+h12+
                       h13+h14+h15+h16+h17+h18+h19+h20+h21+h22+h23+h24)/24
  )

daily_temp <- hourly_temp%>%
  group_by(date)%>%
  summarize(avg_t_ws1 = mean(t_ws1),
            avg_t_ws2 = mean(t_ws2),
            avg_t_ws3 = mean(t_ws3),
            avg_t_ws4 = mean(t_ws4),
            avg_t_ws5 = mean(t_ws5),
            avg_t_ws6 = mean(t_ws6),
            avg_t_ws7 = mean(t_ws7),
            avg_t_ws8 = mean(t_ws8),
            avg_t_ws9 = mean(t_ws9),
            avg_t_ws10 = mean(t_ws10),
            avg_t_ws11 = mean(t_ws11),
            avg_t_ws12 = mean(t_ws12),
            avg_t_ws13 = mean(t_ws13),
            avg_t_ws13 = mean(t_ws13),
            avg_t_ws14 = mean(t_ws14),
            avg_t_ws15 = mean(t_ws15),
            avg_t_ws16 = mean(t_ws16),
            avg_t_ws17 = mean(t_ws17),
            avg_t_ws18 = mean(t_ws18),
            avg_t_ws19 = mean(t_ws19),
            avg_t_ws20 = mean(t_ws20),
            avg_t_ws21 = mean(t_ws21),
            avg_t_ws22 = mean(t_ws22),
            avg_t_ws23 = mean(t_ws23),
            avg_t_ws24 = mean(t_ws24),
            avg_t_ws25 = mean(t_ws25),
            avg_t_ws26 = mean(t_ws26),
            avg_t_ws27 = mean(t_ws27),
            avg_t_ws28 = mean(t_ws28))

daily_humidity <- humidity%>%
  pivot_longer(cols = -c(hr, date), names_to = "rh", values_to = "humidity")%>%
  group_by(date, rh)%>%
  summarize(avg_humidity = mean(humidity))%>%
  pivot_wider(values_from = "avg_humidity", names_from = "rh")
  
```


## Create a Time Series Object

#### Instructions: 

After you process your dataset use the `msts()` function to create a time series object. You need to use `msts()` instead of `ts()` because your daily data will have more than one seasonal component.

## Fit Models to your Data

Fit models to your dataset considering the period Jan 1st 2005 to Dec 31st 2009. 